<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERAS - Map View</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            overflow: hidden;
            height: 100vh;
        }

        /* Navigation */
        .navbar {
            background: linear-gradient(135deg, #c41230 0%, #dc143c 100%);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(220, 20, 60, 0.3);
            position: relative;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #dc143c;
            font-size: 18px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .logo-text {
            color: white;
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .nav-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .nav-btn {
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
            color: #000;
            border: none;
            padding: 10px 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 3px;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .report-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
        }

        .report-btn:hover {
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.5);
        }

        /* Map Container */
        #map {
            height: calc(100vh - 75px);
            width: 100%;
        }

        /* Custom Info Window Styles */
        .info-window {
            max-width: 320px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .info-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            margin: -15px -15px 12px -15px;
            border-radius: 3px 3px 0 0;
        }

        .info-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .info-type {
            padding: 4px 10px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: white;
        }

        .type-critical {
            background: linear-gradient(135deg, #dc143c 0%, #a00f29 100%);
        }

        .type-high {
            background: linear-gradient(135deg, #ff6b35 0%, #e55a25 100%);
        }

        .type-medium {
            background: linear-gradient(135deg, #ffa726 0%, #ff9800 100%);
        }

        .type-low {
            background: linear-gradient(135deg, #66bb6a 0%, #4CAF50 100%);
        }

        .info-time {
            font-size: 11px;
            color: #666;
            text-align: right;
        }

        .info-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #222;
        }

        .info-location {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }

        .info-description {
            font-size: 13px;
            color: #444;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .info-footer {
            border-top: 1px solid #eee;
            padding-top: 12px;
        }

        .info-user {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .user-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: #dc143c;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 12px;
        }

        .user-name {
            font-weight: 600;
            font-size: 12px;
            color: #222;
        }

        .verified-badge {
            color: #1da1f2;
            font-size: 12px;
        }

        .info-actions {
            display: flex;
            gap: 8px;
        }

        .info-btn {
            flex: 1;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            padding: 8px 12px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 3px;
            transition: all 0.2s;
        }

        .info-btn:hover {
            background-color: #dc143c;
            color: white;
            border-color: #dc143c;
        }

        /* Legend */
        .legend {
            position: absolute;
            top: 95px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 90;
        }

        .legend-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #222;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Stats Panel */
        .stats-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 90;
            min-width: 250px;
        }

        .stats-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #222;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 13px;
        }

        .stat-label {
            color: #666;
        }

        .stat-value {
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 3px;
            font-size: 12px;
        }

        .stat-critical {
            background-color: #ffebee;
            color: #dc143c;
        }

        .stat-high {
            background-color: #fff3e0;
            color: #ff6b35;
        }

        .stat-medium {
            background-color: #fffde7;
            color: #f57c00;
        }

        .stat-low {
            background-color: #e8f5e9;
            color: #2e7d32;
        }

        /* Location Label */
        .location-label {
            position: absolute;
            top: 95px;
            left: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 90;
        }

        .location-title {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .location-name {
            font-size: 18px;
            font-weight: 700;
            color: #222;
        }

        /* Custom Marker Animation */
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.3);
                opacity: 0.5;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">
            <div class="logo-icon">E</div>
            <div class="logo-text">ERAS</div>
        </div>
        <div class="nav-right">
            <button class="nav-btn" onclick="alert('Returning to feed...')">📰 Feed View</button>
            <button class="report-btn" onclick="alert('Report Incident Form - Demo')">+ REPORT</button>
            <button class="nav-btn" onclick="alert('Profile Page - Demo')">PROFILE</button>
        </div>
    </nav>

    <!-- Map Container -->
    <div id="map"></div>

    <!-- Location Label -->
    <div class="location-label">
        <div class="location-title">Monitoring Region</div>
        <div class="location-name">Rohnert Park, CA</div>
    </div>

    <!-- Legend -->
    <div class="legend">
        <div class="legend-title">Severity Levels</div>
        <div class="legend-item">
            <div class="legend-dot" style="background: linear-gradient(135deg, #dc143c 0%, #a00f29 100%);"></div>
            <span>Critical</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: linear-gradient(135deg, #ff6b35 0%, #e55a25 100%);"></div>
            <span>High</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: linear-gradient(135deg, #ffa726 0%, #ff9800 100%);"></div>
            <span>Medium</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: linear-gradient(135deg, #66bb6a 0%, #4CAF50 100%);"></div>
            <span>Low</span>
        </div>
    </div>

    <!-- Stats Panel -->
    <div class="stats-panel">
        <div class="stats-title">📊 Active Incidents</div>
        <div class="stat-item">
            <span class="stat-label">Critical</span>
            <span class="stat-value stat-critical">2</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">High</span>
            <span class="stat-value stat-high">1</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Medium</span>
            <span class="stat-value stat-medium">1</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Low</span>
            <span class="stat-value stat-low">1</span>
        </div>
        <div class="stat-item" style="border-top: 1px solid #eee; margin-top: 10px; padding-top: 10px;">
            <span class="stat-label" style="font-weight: 700;">Total Active</span>
            <span style="font-weight: 700; font-size: 16px;">5</span>
        </div>
    </div>

    <script>
        // Incident data for Rohnert Park area
        const incidents = [
            {
                id: 1,
                type: 'GAS LEAK',
                severity: 'critical',
                title: 'Major Gas Leak Downtown',
                location: 'Commerce Blvd & Rohnert Park Expy',
                lat: 38.3398,
                lng: -122.7017,
                description: 'Underground gas main rupture. 3 block evacuation in effect. Emergency crews responding.',
                time: '10:42 AM',
                date: 'Oct 26, 2025',
                reporter: 'Maria Wilson',
                reporterInitials: 'MW',
                reporterRole: 'Fire Chief',
                verified: true,
                image: 'https://loremflickr.com/320/150/gas,emergency'
            },
            {
                id: 2,
                type: 'ACCIDENT',
                severity: 'high',
                title: 'Multi-Vehicle Collision',
                location: 'Highway 101 Southbound',
                lat: 38.3320,
                lng: -122.6890,
                description: '5-car pileup blocking 3 lanes. Injuries reported. Traffic backed up 2 miles.',
                time: '11:15 AM',
                date: 'Oct 26, 2025',
                reporter: 'Jake Stevens',
                reporterInitials: 'JS',
                reporterRole: 'Witness',
                verified: false,
                image: 'https://picsum.photos/320/150?random=10'
            },
            {
                id: 3,
                type: 'POWER OUTAGE',
                severity: 'medium',
                title: 'Neighborhood Power Outage',
                location: 'Crane Canyon Road Area',
                lat: 38.3450,
                lng: -122.7150,
                description: 'Transformer failure affecting 450 homes. PG&E crews on site. ETA restoration: 3 hours.',
                time: '9:20 AM',
                date: 'Oct 26, 2025',
                reporter: 'Tom Chen',
                reporterInitials: 'TC',
                reporterRole: 'Utility Worker',
                verified: true,
                image: 'https://loremflickr.com/320/150/power,lines'
            },
            {
                id: 4,
                type: 'WATER MAIN',
                severity: 'critical',
                title: 'Water Main Break',
                location: 'Snyder Lane & Southwest Blvd',
                lat: 38.3280,
                lng: -122.7050,
                description: 'Major water main rupture flooding intersection. Road closed. Water service interrupted to 200+ homes.',
                time: '8:05 AM',
                date: 'Oct 26, 2025',
                reporter: 'Rachel Lee',
                reporterInitials: 'RL',
                reporterRole: 'Local Resident',
                verified: false,
                image: 'https://loremflickr.com/320/150/water,flood'
            },
            {
                id: 5,
                type: 'CONSTRUCTION',
                severity: 'low',
                title: 'Planned Road Work',
                location: 'Roberts Lake Road',
                lat: 38.3480,
                lng: -122.6950,
                description: 'Scheduled road resurfacing. Single lane closure. Expect minor delays 7AM-5PM.',
                time: '7:00 AM',
                date: 'Oct 26, 2025',
                reporter: 'David Martinez',
                reporterInitials: 'DM',
                reporterRole: 'City Official',
                verified: true,
                image: 'https://picsum.photos/320/150?random=11'
            }
        ];

        // Initialize map
        function initMap() {
            const map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 38.3388, lng: -122.7017 },
                zoom: 14,
                styles: [
                    {
                        featureType: 'poi',
                        elementType: 'labels',
                        stylers: [{ visibility: 'off' }]
                    }
                ]
            });

            // Create markers for each incident
            incidents.forEach(incident => {
                const marker = new google.maps.Marker({
                    position: { lat: incident.lat, lng: incident.lng },
                    map: map,
                    title: incident.title,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 15,
                        fillColor: getSeverityColor(incident.severity),
                        fillOpacity: 1,
                        strokeColor: '#ffffff',
                        strokeWeight: 4
                    },
                    animation: google.maps.Animation.DROP
                });

                // Create info window content
                const infoContent = `
                    <div class="info-window">
                        <img src="${incident.image}" alt="${incident.type}" class="info-image">
                        <div class="info-header">
                            <span class="info-type type-${incident.severity}">${incident.type}</span>
                            <span class="info-time">${incident.time}<br>${incident.date}</span>
                        </div>
                        <h3 class="info-title">${incident.title}</h3>
                        <div class="info-location">📍 ${incident.location}</div>
                        <p class="info-description">${incident.description}</p>
                        <div class="info-footer">
                            <div class="info-user">
                                <div class="user-avatar">${incident.reporterInitials}</div>
                                <div>
                                    <div class="user-name">
                                        ${incident.reporter}
                                        ${incident.verified ? '<span class="verified-badge">✓</span>' : ''}
                                    </div>
                                    <div style="font-size: 11px; color: #666;">${incident.reporterRole}</div>
                                </div>
                            </div>
                            <div class="info-actions">
                                <button class="info-btn" onclick="alert('Viewing details...')">Details</button>
                                <button class="info-btn" onclick="alert('Sharing...')">Share</button>
                            </div>
                        </div>
                    </div>
                `;

                const infoWindow = new google.maps.InfoWindow({
                    content: infoContent,
                    maxWidth: 320
                });

                marker.addListener('click', () => {
                    infoWindow.open(map, marker);
                });
            });
        }

        function getSeverityColor(severity) {
            const colors = {
                'critical': '#dc143c',
                'high': '#ff6b35',
                'medium': '#ffa726',
                'low': '#66bb6a'
            };
            return colors[severity] || '#666666';
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCLuaErlhrs0dKfLqrMcRaeuFxgSFOfmfA&callback=initMap" async defer></script>
</body>
</html>