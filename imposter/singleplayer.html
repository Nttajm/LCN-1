<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostor - Single Player Mode</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            min-width: 400px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            backdrop-filter: blur(5px);
        }

        input[type="text"]::placeholder,
        textarea::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ffd93d);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
        }

        .btn-success {
            background: linear-gradient(45deg, #00b894, #00cec9);
        }

        .btn-large {
            font-size: 20px;
            padding: 18px 36px;
        }

        .text-center {
            text-align: center;
        }

        .word-bank-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .word-bank-options {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .word-preview {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            max-height: 100px;
            overflow-y: auto;
            font-size: 14px;
        }

        .player-names-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .player-name-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .player-name-input label {
            min-width: 80px;
            margin-bottom: 0;
        }

        .player-name-input input {
            flex: 1;
        }

        .card-container {
            perspective: 1000px;
            width: 100%;
            height: 300px;
            margin: 30px 0;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-back {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            transform: rotateY(180deg);
        }

        .card-back.impostor {
            background: linear-gradient(135deg, #e17055 0%, #d63031 100%);
        }

        .player-info {
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .game-instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-size: 14px;
            line-height: 1.6;
        }

        .game-results {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .word-reveal {
            font-size: 2em;
            color: #00cec9;
            margin: 15px 0;
            font-weight: bold;
        }

        .impostor-reveal {
            font-size: 1.5em;
            color: #e17055;
            margin: 15px 0;
        }

        .mode-selection {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .mode-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 250px;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
        }

        .mode-card h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .mode-card p {
            font-size: 0.9em;
            line-height: 1.5;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
                min-width: 0;
            }
            
            h1 {
                font-size: 2em;
            }

            .mode-selection {
                flex-direction: column;
            }

            .mode-card {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Menu -->
        <div id="mainPage" class="page active">
            <h1>üé≠ Impostor</h1>
            <div class="mode-selection">
                <div class="mode-card" onclick="showSetupPage()">
                    <h3>üì± Pass & Play</h3>
                    <p>Play on a single device. Pass it around to reveal each player's word.</p>
                </div>
                <div class="mode-card" onclick="window.location.href='index.html'">
                    <h3>üåê Online Mode</h3>
                    <p>Play with friends online. Each player uses their own device.</p>
                </div>
            </div>
        </div>

        <!-- Setup Page -->
        <div id="setupPage" class="page">
            <h2>Game Setup</h2>
            
            <div class="input-group">
                <label for="playerCount">Number of Players:</label>
                <input type="number" id="playerCount" min="2" max="20" onchange="generatePlayerNameInputs()">
            </div>

            <div class="player-names-section">
                <h3>Player Names</h3>
                <div id="playerNamesContainer"></div>
            </div>

            <div class="word-bank-section">
                <h3>Word Bank</h3>
                <div class="word-bank-options">
                    <button class="btn btn-secondary" onclick="showWordBankOption('manual')">Add Words</button>
                    <button class="btn btn-secondary" onclick="showWordBankOption('paste')">Paste List</button>
                    <button class="btn btn-secondary" onclick="showWordBankOption('default')">Use Default</button>
                    <button class="btn" onclick="clearWords()">Clear Words</button>
                </div>
                
                <div id="manualWords" style="display: none;">
                    <div class="input-group">
                        <input type="text" id="newWord" placeholder="Enter a word" onkeypress="if(event.key==='Enter') addWord()">
                        <button class="btn" onclick="addWord()">Add Word</button>
                    </div>
                </div>
                
                <div id="pasteWords" style="display: none;">
                    <div class="input-group">
                        <textarea id="wordList" placeholder="Paste words here (one per line or tab-separated)"></textarea>
                        <button class="btn" onclick="addWordsFromList()">Add Words</button>
                    </div>
                </div>
                
                <div id="defaultWords" style="display: none;">
                    <button class="btn" onclick="useDefaultWords()">Use Default Word Bank</button>
                </div>
                
                <div class="word-preview">
                    <strong>Current Words:</strong>
                    <div id="wordsPreview">No words added yet</div>
                </div>
            </div>

            <div class="text-center">
                <button class="btn btn-success btn-large" onclick="startGame()">Start Game</button>
                <button class="btn btn-secondary" onclick="showMainPage()">Back</button>
            </div>
        </div>

        <!-- Game Page -->
        <div id="gamePage" class="page">
            <div class="player-info" id="playerInfo"></div>

            <div class="game-instructions">
                <strong>‚ö†Ô∏è Important:</strong> Make sure only the current player can see the screen!
            </div>

            <div class="card-container">
                <div class="card" id="wordCard">
                    <div class="card-face card-front">
                        <div>‚ùì</div>
                    </div>
                    <div class="card-face card-back" id="cardBack">
                        <div id="wordDisplay"></div>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <button class="btn btn-large" id="revealBtn" onclick="revealWord()">Reveal My Word</button>
                <button class="btn btn-success btn-large" id="nextBtn" onclick="nextPlayer()" style="display: none;">Next Player</button>
            </div>
        </div>

        <!-- Results Page -->
        <div id="resultsPage" class="page">
            <h2>Game Over!</h2>
            
            <div class="game-results">
                <div class="word-reveal" id="finalWord"></div>
                <div class="impostor-reveal" id="finalImpostor"></div>
            </div>

            <div class="text-center">
                <button class="btn btn-success btn-large" onclick="startGame()">Play Again</button>
                <button class="btn btn-secondary" onclick="showSetupPage()">Change Settings</button>
                <button class="btn btn-secondary" onclick="showMainPage()">Main Menu</button>
            </div>
        </div>

        <div id="discussionPage" class="page">
  <h2>üïµÔ∏è Discussion Time</h2>
  <p style="text-align:center; font-size:1.2em; margin:20px 0;">
    The game has started! Discuss among yourselves and find the impostor.
  </p>
  <div class="text-center">
    <button class="btn btn-success btn-large" onclick="endGame()">End Game</button>
  </div>
</div>


    </div>



    <script>
        // Game state
        let gameWords = [];
        let currentPlayerIndex = 0;
        let totalPlayers = 0;
        let gameWord = '';
        let impostorIndex = -1;
        let playerAssignments = [];
        let playerNames = [];

        // Default word bank
        const defaultWordBank = [
            "apple","banana","ocean","mountain","computer","telephone","guitar","pizza",
            "elephant","butterfly","rainbow","thunder","castle","dragon","wizard","robot",
            "spaceship","treasure","island","forest","river","sunset","camera","bicycle",
            "chocolate","diamond","flower","lighthouse","penguin","volcano"
        ];

        // Load saved words
        function loadSavedWords() {
            const saved = localStorage.getItem('impostorWords');
            if (saved) {
                gameWords = JSON.parse(saved);
                updateWordsPreview();
            }
        }

        // Save words
        function saveWords() {
            localStorage.setItem('impostorWords', JSON.stringify(gameWords));
        }

        // Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        function showMainPage() {
            showPage('mainPage');
        }

        function showSetupPage() {
            showPage('setupPage');
            generatePlayerNameInputs();
        }

        // Generate player name inputs
        function generatePlayerNameInputs() {
            const count = parseInt(document.getElementById('playerCount').value);
            const container = document.getElementById('playerNamesContainer');
            container.innerHTML = '';

            for (let i = 1; i <= count; i++) {
                const div = document.createElement('div');
                div.className = 'player-name-input';
                
                const label = document.createElement('label');
                label.textContent = `Player ${i}:`;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.id = `playerName${i}`;
                input.placeholder = `Player ${i}`;
                input.value = playerNames[i - 1] || `Player ${i}`;
                
                div.appendChild(label);
                div.appendChild(input);
                container.appendChild(div);
            }
        }

        // Word bank functions
        function showWordBankOption(option) {
            document.getElementById('manualWords').style.display = 'none';
            document.getElementById('pasteWords').style.display = 'none';
            document.getElementById('defaultWords').style.display = 'none';
            document.getElementById(option + 'Words').style.display = 'block';
        }

        function addWord() {
            const newWord = document.getElementById('newWord').value.trim();
            if (newWord && !gameWords.includes(newWord.toLowerCase())) {
                gameWords.push(newWord.toLowerCase());
                document.getElementById('newWord').value = '';
                updateWordsPreview();
                saveWords();
            }
        }

        function addWordsFromList() {
            const wordList = document.getElementById('wordList').value.trim();
            if (!wordList) return;

            const words = wordList.split(/[\n\t,]+/)
                .map(word => word.trim().toLowerCase())
                .filter(word => word && !gameWords.includes(word));
            
            gameWords.push(...words);
            document.getElementById('wordList').value = '';
            updateWordsPreview();
            saveWords();
        }

        function useDefaultWords() {
            gameWords = [...defaultWordBank];
            updateWordsPreview();
            saveWords();
        }

        function clearWords() {
            gameWords = [];
            updateWordsPreview();
            saveWords();
        }

        function updateWordsPreview() {
            const preview = document.getElementById('wordsPreview');
            if (gameWords.length === 0) {
                preview.textContent = 'No words added yet';
            } else {
                preview.textContent = gameWords.join(', ');
            }
        }

        // Get player names from inputs
        function getPlayerNames() {
            const count = parseInt(document.getElementById('playerCount').value);
            const names = [];
            
            for (let i = 1; i <= count; i++) {
                const input = document.getElementById(`playerName${i}`);
                const name = input.value.trim() || `Player ${i}`;
                names.push(name);
            }
            
            return names;
        }

        // Game functions
        function startGame() {
            if (gameWords.length === 0) {
                alert('Please add some words to the word bank first!');
                return;
            }

            totalPlayers = parseInt(document.getElementById('playerCount').value);
            
            if (totalPlayers < 2) {
                alert('You need at least 2 players!');
                return;
            }

            // Get player names
            playerNames = getPlayerNames();

            // Setup game
            currentPlayerIndex = 0;
            gameWord = gameWords[Math.floor(Math.random() * gameWords.length)];
            impostorIndex = Math.floor(Math.random() * totalPlayers);

            // Create player assignments
            playerAssignments = [];
            for (let i = 0; i < totalPlayers; i++) {
                playerAssignments.push({
                    playerNumber: i + 1,
                    playerName: playerNames[i],
                    isImpostor: i === impostorIndex,
                    word: gameWord
                });
            }

            showPlayerTurn();
        }

        function showPlayerTurn() {
    showPage('gamePage');
    
    const playerInfo = document.getElementById('playerInfo');
    const currentPlayer = playerAssignments[currentPlayerIndex];
    playerInfo.textContent = `${currentPlayer.playerName} (${currentPlayerIndex + 1} of ${totalPlayers})`;

    // Reset card
    document.getElementById('wordCard').classList.remove('flipped');
    document.getElementById('revealBtn').style.display = 'inline-block';
    const nextBtn = document.getElementById('nextBtn');
    nextBtn.style.display = 'none';

    // Update button text depending on last player
    if (currentPlayerIndex === totalPlayers - 1) {
        nextBtn.textContent = 'Find the Impostor';
    } else {
        nextBtn.textContent = 'Next Player';
    }
}

function revealWord() {
    const assignment = playerAssignments[currentPlayerIndex];
    const cardBack = document.getElementById('cardBack');
    const wordDisplay = document.getElementById('wordDisplay');

    if (assignment.isImpostor) {
        cardBack.classList.add('impostor');
        wordDisplay.innerHTML = 'üïµÔ∏è<br>IMPOSTOR<br>???';
    } else {
        cardBack.classList.remove('impostor');
        wordDisplay.textContent = assignment.word.toUpperCase();
    }

    // Flip card
    document.getElementById('wordCard').classList.add('flipped');
    document.getElementById('revealBtn').style.display = 'none';
    document.getElementById('nextBtn').style.display = 'inline-block';
}

function nextPlayer() {
    // If last player, go to discussion phase
    if (currentPlayerIndex === totalPlayers - 1) {
        showPage('discussionPage');
        return;
    }

    // Otherwise move to next player
    currentPlayerIndex++;
    showPlayerTurn();
}

function endGame() {
    showResults();
}



        function showResults() {
            showPage('resultsPage');
            const impostorPlayer = playerAssignments[impostorIndex];
            document.getElementById('finalWord').textContent = `The word was: ${gameWord.toUpperCase()}`;
            document.getElementById('finalImpostor').textContent = `üïµÔ∏è The impostor was ${impostorPlayer.playerName}`;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedWords();
            generatePlayerNameInputs();
        });
    </script>
</body>
</html>